-- ============================================================
-- PDKS Seed Data
-- ============================================================
-- NOTE: This seed file creates sample data for development/testing.
-- Auth users must be created separately via Supabase Auth API or Dashboard.
-- The UUIDs below are placeholders - in production, these would be
-- generated by auth.users creation.
-- ============================================================

-- Use fixed UUIDs for reproducibility in development
-- Super Admin: 00000000-0000-0000-0000-000000000001
-- Company 1:   00000000-0000-0000-0000-000000000010
-- Operator 1:  00000000-0000-0000-0000-000000000020
-- Employee 1:  00000000-0000-0000-0000-000000000030
-- Employee 2:  00000000-0000-0000-0000-000000000031
-- Chef 1:      00000000-0000-0000-0000-000000000040

-- ============================================================
-- 1. Create sample company
-- ============================================================
INSERT INTO companies (id, name, address, phone, email, is_active)
VALUES (
  '00000000-0000-0000-0000-000000000010',
  'Demo Sirket A.S.',
  'Istanbul, Turkiye',
  '+90 212 555 0100',
  'info@demosirket.com',
  true
) ON CONFLICT DO NOTHING;

-- ============================================================
-- 2. Create profiles (auth users must be created separately)
-- ============================================================

-- Super Admin profile
-- (Auth user with email: admin@pdks.com / password: Admin123!)
INSERT INTO profiles (id, company_id, role, first_name, last_name, email, phone, is_active)
VALUES (
  '00000000-0000-0000-0000-000000000001',
  NULL,
  'super_admin',
  'System',
  'Admin',
  'admin@pdks.com',
  '+90 500 000 0001',
  true
) ON CONFLICT DO NOTHING;

-- Operator profile
-- (Auth user with email: operator@demosirket.com / password: Operator123!)
INSERT INTO profiles (id, company_id, role, first_name, last_name, email, phone, start_date, is_active)
VALUES (
  '00000000-0000-0000-0000-000000000020',
  '00000000-0000-0000-0000-000000000010',
  'operator',
  'Ahmet',
  'Yilmaz',
  'operator@demosirket.com',
  '+90 500 000 0020',
  '2024-01-01',
  true
) ON CONFLICT DO NOTHING;

-- Employee 1
-- (Auth user with email: ayse@demosirket.com / password: Employee123!)
INSERT INTO profiles (id, company_id, role, first_name, last_name, email, phone, start_date, is_active)
VALUES (
  '00000000-0000-0000-0000-000000000030',
  '00000000-0000-0000-0000-000000000010',
  'employee',
  'Ayse',
  'Demir',
  'ayse@demosirket.com',
  '+90 500 000 0030',
  '2024-03-15',
  true
) ON CONFLICT DO NOTHING;

-- Employee 2
-- (Auth user with email: mehmet@demosirket.com / password: Employee123!)
INSERT INTO profiles (id, company_id, role, first_name, last_name, email, phone, start_date, is_active)
VALUES (
  '00000000-0000-0000-0000-000000000031',
  '00000000-0000-0000-0000-000000000010',
  'employee',
  'Mehmet',
  'Kaya',
  'mehmet@demosirket.com',
  '+90 500 000 0031',
  '2024-06-01',
  true
) ON CONFLICT DO NOTHING;

-- Chef
-- (Auth user with email: fatma@demosirket.com / password: Chef123!)
INSERT INTO profiles (id, company_id, role, first_name, last_name, email, phone, start_date, is_active)
VALUES (
  '00000000-0000-0000-0000-000000000040',
  '00000000-0000-0000-0000-000000000010',
  'chef',
  'Fatma',
  'Ozturk',
  'fatma@demosirket.com',
  '+90 500 000 0040',
  '2024-02-01',
  true
) ON CONFLICT DO NOTHING;

-- ============================================================
-- 3. Shift Templates
-- ============================================================
INSERT INTO shift_templates (id, company_id, name, start_time, end_time, break_duration_minutes, work_days, is_active)
VALUES
  (
    '00000000-0000-0000-0000-000000000100',
    '00000000-0000-0000-0000-000000000010',
    'Sabah Vardiyasi',
    '09:00',
    '18:00',
    60,
    '{1,2,3,4,5}',
    true
  ),
  (
    '00000000-0000-0000-0000-000000000101',
    '00000000-0000-0000-0000-000000000010',
    'Gece Vardiyasi',
    '22:00',
    '06:00',
    30,
    '{1,2,3,4,5}',
    true
  ),
  (
    '00000000-0000-0000-0000-000000000102',
    '00000000-0000-0000-0000-000000000010',
    'Yari Zamanli',
    '09:00',
    '13:00',
    0,
    '{1,2,3,4,5}',
    true
  )
ON CONFLICT DO NOTHING;

-- ============================================================
-- 4. Employee Schedules (assign morning shift to employees)
-- ============================================================
INSERT INTO employee_schedules (employee_id, company_id, shift_template_id, effective_from)
VALUES
  (
    '00000000-0000-0000-0000-000000000030',
    '00000000-0000-0000-0000-000000000010',
    '00000000-0000-0000-0000-000000000100',
    '2024-03-15'
  ),
  (
    '00000000-0000-0000-0000-000000000031',
    '00000000-0000-0000-0000-000000000010',
    '00000000-0000-0000-0000-000000000100',
    '2024-06-01'
  ),
  (
    '00000000-0000-0000-0000-000000000040',
    '00000000-0000-0000-0000-000000000010',
    '00000000-0000-0000-0000-000000000100',
    '2024-02-01'
  )
ON CONFLICT DO NOTHING;

-- ============================================================
-- 5. Overtime Rules
-- ============================================================
INSERT INTO overtime_rules (id, company_id, name, description, rule_type, threshold_minutes, multiplier, is_active, priority)
VALUES
  (
    '00000000-0000-0000-0000-000000000200',
    '00000000-0000-0000-0000-000000000010',
    'Gunluk Mesai',
    'Gunluk 8 saat ustusu mesai (1.5x)',
    'daily_threshold',
    480,
    1.50,
    true,
    10
  ),
  (
    '00000000-0000-0000-0000-000000000201',
    '00000000-0000-0000-0000-000000000010',
    'Haftalik Mesai',
    'Haftalik 45 saat ustusu mesai (2.0x)',
    'weekly_threshold',
    2700,
    2.00,
    true,
    5
  )
ON CONFLICT DO NOTHING;

-- ============================================================
-- 6. Assign overtime rules to employees
-- ============================================================
INSERT INTO employee_overtime_rules (employee_id, overtime_rule_id, company_id)
VALUES
  ('00000000-0000-0000-0000-000000000030', '00000000-0000-0000-0000-000000000200', '00000000-0000-0000-0000-000000000010'),
  ('00000000-0000-0000-0000-000000000031', '00000000-0000-0000-0000-000000000200', '00000000-0000-0000-0000-000000000010'),
  ('00000000-0000-0000-0000-000000000040', '00000000-0000-0000-0000-000000000200', '00000000-0000-0000-0000-000000000010')
ON CONFLICT DO NOTHING;

-- ============================================================
-- 7. Leave Types
-- ============================================================
INSERT INTO leave_types (id, company_id, name, default_days_per_year, is_paid, is_active)
VALUES
  (
    '00000000-0000-0000-0000-000000000300',
    '00000000-0000-0000-0000-000000000010',
    'Yillik Izin',
    14,
    true,
    true
  ),
  (
    '00000000-0000-0000-0000-000000000301',
    '00000000-0000-0000-0000-000000000010',
    'Hastalik Izni',
    10,
    true,
    true
  ),
  (
    '00000000-0000-0000-0000-000000000302',
    '00000000-0000-0000-0000-000000000010',
    'Ucretsiz Izin',
    NULL,
    false,
    true
  )
ON CONFLICT DO NOTHING;

-- ============================================================
-- 8. Leave Balances for current year
-- ============================================================
INSERT INTO leave_balances (employee_id, leave_type_id, company_id, year, total_days, used_days)
VALUES
  ('00000000-0000-0000-0000-000000000030', '00000000-0000-0000-0000-000000000300', '00000000-0000-0000-0000-000000000010', 2026, 14.0, 0),
  ('00000000-0000-0000-0000-000000000030', '00000000-0000-0000-0000-000000000301', '00000000-0000-0000-0000-000000000010', 2026, 10.0, 0),
  ('00000000-0000-0000-0000-000000000031', '00000000-0000-0000-0000-000000000300', '00000000-0000-0000-0000-000000000010', 2026, 14.0, 0),
  ('00000000-0000-0000-0000-000000000031', '00000000-0000-0000-0000-000000000301', '00000000-0000-0000-0000-000000000010', 2026, 10.0, 0),
  ('00000000-0000-0000-0000-000000000040', '00000000-0000-0000-0000-000000000300', '00000000-0000-0000-0000-000000000010', 2026, 14.0, 0),
  ('00000000-0000-0000-0000-000000000040', '00000000-0000-0000-0000-000000000301', '00000000-0000-0000-0000-000000000010', 2026, 10.0, 0)
ON CONFLICT DO NOTHING;

-- ============================================================
-- 9. Notification Settings
-- ============================================================
INSERT INTO notification_settings (company_id, forgot_clockout_enabled, forgot_clockout_time, forgot_clockout_offset_minutes)
VALUES (
  '00000000-0000-0000-0000-000000000010',
  true,
  '18:30',
  30
) ON CONFLICT DO NOTHING;
